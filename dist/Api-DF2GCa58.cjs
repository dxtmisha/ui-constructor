"use strict";var f=Object.defineProperty;var y=(r,t,a)=>t in r?f(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;var o=(r,t,a)=>(y(r,typeof t!="symbol"?t+"":t,a),a);const m=require("./isFilled-B58mquTF.cjs"),e=require("./Geo-BXw53kTY.cjs"),c=require("./DataStorage-BkX_xmBA.cjs");var l=(r=>(r.get="GET",r.post="POST",r.put="PUT",r.delete="DELETE",r))(l||{});class n{static isLocalhost(){return typeof location>"u"||location.hostname==="localhost"}static getHeaders(t,a="application/json;charset=UTF-8"){if(t!==null){const s={...t||{}};return a&&(s["Content-Type"]=a),s}}static getUrl(t){return`${this.isLocalhost()?this.urlLocalhost:this.url}${t}`.replace("{locale}",e.Geo.getLocation()).replace("{country}",e.Geo.getCountry()).replace("{language}",e.Geo.getLanguage())}static getUrlByCommand(t){return this.isLocalhost()?`${this.urlCommand}/${t}.json`:`${this.urlCommand}/?command=${t}`}static getBody(t){if(m.isFilled(t))return t instanceof FormData||e.isString(t)?t:JSON.stringify(t)}static async response(t){return e.isString(t)?await this.fetch({path:t}):await this.fetch(t)}static async responseByCommand(t,a){return await this.fetch({path:this.getUrlByCommand(t),...a??{}})}static async fetch({path:t="",method:a="GET",request:s=void 0,headers:u={},type:h="application/json;charset=UTF-8",init:d={}}){try{const i=this.getHeaders(u,h),g=i&&a==="GET"?"POST":a;return await(await fetch(this.getUrl(t),{...d,method:g,headers:i,body:this.getBody(s)})).json()}catch(i){console.error(i)}return{}}}o(n,"url",c.useEnv("api","/")),o(n,"urlLocalhost",`${c.useEnv("BASE_URL","/")}public/`),o(n,"urlCommand","ui");exports.Api=n;exports.ApiMethodItem=l;
