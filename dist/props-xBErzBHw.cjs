"use strict";var h=Object.defineProperty;var u=(s,t,e)=>t in s?h(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var r=(s,t,e)=>(u(s,typeof t!="symbol"?t+"":t,e),e);const a=require("vue"),b=require("./DesignConstructorAbstract-BUcyMiAM.cjs"),n=require("./createElement-GrIoepsg.cjs"),d=require("./DataStorage-AmPehfI-.cjs"),g=require("./EventItem-BcAMj33T.cjs");class l{static async is(){const t=await this.get();return t!==-1&&t<=8}static async get(){const t=this.storage.get()??-1;if(!this.calculate&&t===-1){const e=await this.init();return this.storage.set(e),e}return t}static createElement(){return n.createElement(document.body,"div",t=>{t.style.height="24px",t.style.overflowY="scroll",t.style.position="fixed",t.style.width="100%",n.createElement(t,"div",e=>{e.style.height="100px"})})}static init(){return new Promise(t=>{this.calculate=!0;const e=this.createElement();requestAnimationFrame(()=>{t(e.offsetWidth-e.clientWidth),e.remove(),this.calculate=!1})})}}r(l,"storage",new d.DataStorage("scrollbar",!0)),r(l,"calculate",!1);const o=8;class p{constructor(t,e,i){r(this,"event");r(this,"top",!1);r(this,"bottom",!1);this.props=t,this.element=e,this.callback=i}getClasses(){return{"??--border--top":this.top,"??--border--bottom":this.bottom}}start(){return this.event?this.event.start():this.event=new g.EventItem(this.element.value,["scroll-sync"],()=>this.on()).start(),this.on(),this}stop(){return this.event&&this.event.stop(),this}toggle(){return this.props.border?this.start():this.stop(),this}reset(){return this.event&&this.event.setElement(this.element.value),this.toggle()}setData(t,e){return(this.top!==t||this.bottom!==e)&&(this.top=t,this.bottom=e,this.callback&&this.callback()),this}on(){const t=this.element.value;t&&this.setData(t.scrollTop>o,t.scrollTop<t.scrollHeight-t.clientHeight-o)}}class m{constructor(t,e,i){r(this,"border");this.border=new p(t,e,i)}async getClasses(){return{"??--disabled":await this.getDisabled(),...this.border.getClasses()}}async getDisabled(){return await l.is()}}class f{constructor(t,e){r(this,"scrollbar");r(this,"classes",a.ref({}));this.scrollbar=new m(t,e,()=>this.updateClasses().then()),a.watchEffect(async()=>{this.scrollbar.border.reset(),await this.updateClasses()}),a.onMounted(async()=>{await a.nextTick(),requestAnimationFrame(()=>this.scrollbar.border.toggle())})}async updateClasses(){return this.classes.value=await this.scrollbar.getClasses(),this}}class v extends b.DesignConstructorAbstract{constructor(e,i,c){super(e,i,c);r(this,"scrollbar");this.scrollbar=new f(this.props,this.element),this.init()}makeOptions(){return this}initSetup(){return{}}initExpose(){return{}}initClasses(){return{main:{...this.toClassName(this.scrollbar.classes.value)}}}initStyles(){return{}}initRender(){const e=this.setup(),i=[this.initSlot("default")];return a.h(this.props.tag,{...this.getAttrs(),ref:this.element,class:e.classes.value.main},i)}}const w={tag:"div"},y={tag:{type:String,default:w.tag},visible:Boolean,border:Boolean,inverse:Boolean};exports.ScrollbarDesign=v;exports.propsScrollbar=y;
