"use strict";var M=Object.defineProperty;var C=(c,e,n)=>e in c?M(c,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[e]=n;var h=(c,e,n)=>(C(c,typeof e!="symbol"?e+"":e,n),n);const D=require("./forEach-AdslABYj.cjs"),d=require("./Api-Dt0Cen0R.cjs"),T=require("./DataStorage-BDCQmA4V.cjs"),m=require("./toNumber-Bjrk1Cck.cjs");class N{constructor(e){h(this,"cache");h(this,"comparisons",[]);this.callback=e}getCache(e){return this.isUpdate(e)&&this.setCache(),this.cache}async getCacheAsync(e){return this.isUpdate(e)&&await this.setCacheAsync(),this.cache}setCache(){this.cache=this.callback()}async setCacheAsync(){this.cache=await this.callback()}isUpdate(e){return this.cache===void 0||this.comparisons.length!==e.length||this.comparisons.findIndex((n,a)=>n!==e[a])>=0?(this.comparisons=[...e],!0):!1}}function l(c){if(c instanceof Date)return c;if(T.isNull(c))return new Date;if(typeof c=="number")return new Date(c);let e=c,n="";c.replace(/^([\s\S]+)([-+]\d{2}:?\d{2})$/,(r,$,i)=>(e=$,n=i,r));const a=(/^\d{4}\d{2}\d{2}$/.exec(e)&&`${e.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3")}T00:00:00`)??(/^\d{4}\d{2}$/.exec(e)&&`${e.replace(/^(\d{4})(\d{2})$/,"$1-$2")}-01T00:00:00`)??(/^\d{4}-\d{2}-\d{2}$/.exec(e)&&`${e}T00:00:00`)??(/^\d{4}-\d{2}$/.exec(e)&&`${e}-01T00:00:00`)??(/^\d{4}$/.exec(e)&&`${e}-01-01T00:00:00`)??(/^\d{2}:\d{2}$/.exec(e)&&`2000-01-01T${e}:00`)??(/^\d{2}:\d{2}:\d{2}$/.exec(e)&&`2000-01-01T${e}`)??e.replace(" ","T");return new Date(`${a}${n}`)}class L{constructor(e=d.Geo.getLocation()){h(this,"geo");this.geo=d.Geo.find(e);const n=this.getLocation();if(n in f)return f[n];f[n]=this}getLocation(){return this.geo.standard}getFirstDay(){return this.geo.firstDay}display(e,n){let a={type:"language"},r;n&&(typeof n=="string"?a.type=n:a={...a,...n});try{e?r=new Intl.DisplayNames(this.getLocation(),a).of(e):a.type==="language"?r=new Intl.DisplayNames(this.getLocation(),a).of(this.geo.language):a.type==="region"&&(r=new Intl.DisplayNames(this.getLocation(),a).of(this.geo.country))}catch{}return r??e??""}languageName(e,n){const a={type:"language",style:n};return this.display(e,a)}countryName(e,n){const a={type:"region",style:n};return this.display(e,a)}number(e,n){var a,r;return((r=(a=this.numberObject(n))==null?void 0:a.format)==null?void 0:r.call(a,m.toNumber(e)))||e.toString()}decimal(){var e,n,a,r,$;return(($=(r=(a=(n=(e=this.numberObject())==null?void 0:e.formatToParts)==null?void 0:n.call(e,1.2))==null?void 0:a.find)==null?void 0:r.call(a,i=>i.type==="decimal"))==null?void 0:$.value)||"."}currency(e,n,a=!1){const r={style:"currency",currencyDisplay:"symbol",...typeof n=="string"?{currency:n}:n||{}},$=e.toString().replace(/^([\S\s]+[\d ])([a-zA-Z]{3})$/i,(...i)=>(r.currency=i[2].toUpperCase(),i[1]));if(a){const i=this.numberObject(r);return i?i.formatToParts(m.toNumber(e)).filter(o=>["literal","currency"].indexOf(o.type)===-1).join(""):e.toString()}else return this.number($,r)}unit(e,n){const a={style:"unit",...typeof n=="string"?{unit:n}:n||{}},r=e.toString().replace(/^([\S\s]+[\d ])([a-zA-Z]+)$/i,(...$)=>(a.unit=$[2].toLowerCase(),$[1]));return this.number(r,a)}percent(e,n){return this.number(e,{style:"percent",...n||{}})}percentBy100(e,n){return this.percent(m.toNumber(e)/100,n)}date(e,n,a,r){const $=l(e),i=typeof a=="string",o=this.dateOptions(n,i?a:"short");return r&&(o.hour12=!1),i||Object.assign(o,a),$.toLocaleString(this.getLocation(),o)}relative(e,n,a){const r=l(e),$=a||new Date,i={numeric:"auto",...typeof n=="string"?{style:n}:n||{}};let o="second",s=(r.getTime()-$.getTime())/1e3;Math.abs(s)>=60&&(o="minute",s/=60,Math.abs(s)>=60&&(o="hour",s/=60,Math.abs(s)>=24&&(o="day",s/=24,Math.abs(s)>=30&&(o="month",s/=30,Math.abs(s)>=12&&(o="year",s/=12)))));try{return new Intl.RelativeTimeFormat(this.getLocation(),i).format(Math.round(s),o)}catch{}return""}relativeLimit(e,n,a,r,$,i,o){const s=l(e),u=a||new Date,b=new Date(u),p=new Date(u);return b.setDate(u.getDate()-n),p.setDate(u.getDate()+n),s>=b&&s<=p?this.relative(s,r,u):this.date(s,i,$,o)}month(e,n){try{return Intl.DateTimeFormat(this.getLocation(),{month:n||"long"}).format(l(e))}catch{}return""}months(e){const n=[{label:"",value:void 0}];try{const a=new Date,r=Intl.DateTimeFormat(this.getLocation(),{month:e||"long"});for(let $=0;$<12;$++)a.setMonth($),n.push({label:r.format(a).replace(/^./,i=>i.toUpperCase()),value:$+1})}catch{}return n}weekday(e,n){try{return Intl.DateTimeFormat(this.getLocation(),{weekday:n||"long"}).format(l(e))}catch{}return""}weekdays(e){const n=[{label:"",value:void 0}];try{const a=new Date,r=Intl.DateTimeFormat(this.getLocation(),{weekday:e||"long"}),$=a.getDay()+(this.geo.firstDay==="Mo"?-1:1);a.setDate(a.getDate()-$);for(let i=0;i<7;i++)n.push({label:r.format(a).replace(/^./,o=>o.toUpperCase()),value:a.getDay()}),a.setDate(a.getDate()+1)}catch{}return n}time(e){return this.date(e,"time")}sort(e,n=(a,r)=>[a,r]){const a=new Intl.Collator(this.getLocation());return e.sort((r,$)=>a.compare(...n(r,$)))}numberObject(e){try{return new Intl.NumberFormat(this.getLocation(),e)}catch{}}dateOptions(e,n="short"){const a={};return["full","datetime","date",void 0,"year-month","year"].indexOf(e)!==-1&&(a.year="numeric"),["full","datetime","date",void 0,"year-month","month"].indexOf(e)!==-1&&(a.month=n),["full","datetime","date",void 0,"day"].indexOf(e)!==-1&&(a.day="2-digit"),e!==void 0&&(["full","datetime","time","hour-minute","hour"].indexOf(e)!==-1&&(a.hour="2-digit"),["full","datetime","time","hour-minute","minute"].indexOf(e)!==-1&&(a.minute="2-digit"),["full","time","second"].indexOf(e)!==-1&&(a.second="2-digit")),a}}const f={},t="@flag",g=class g{constructor(e=d.Geo.getLocation()){this.code=e}get(e=this.code){var a;const n=d.Geo.find(e);if(n){const r=this.getCountry(n);return{language:this.getLanguage(n),country:r,standard:n.standard,icon:(a=g.flags)==null?void 0:a[n.country],label:r,value:n.country}}}getFlag(e=this.code){var n;return(n=this.get(e))==null?void 0:n.icon}getList(e){return D.forEach(this.getCodes(e),n=>this.get(n))}getNational(e){return D.forEach(this.getList(e),n=>{const a=new g(n.language).get(n.standard);return{...n,nationalLanguage:a==null?void 0:a.language,nationalCountry:a==null?void 0:a.country}})}setCode(e){return this.code=e,this}getLocation(){return new L(this.code)}getCodes(e){return e??Object.keys(g.flags)}getLanguage(e){return this.getLocation().languageName(e.language)}getCountry(e){return this.getLocation().countryName(e.country)}};h(g,"flags",{AD:`${t}-ad`,AE:`${t}-ae`,AF:`${t}-af`,AG:`${t}-ag`,AI:`${t}-ai`,AL:`${t}-al`,AM:`${t}-am`,AN:`${t}-an`,AO:`${t}-ao`,AQ:`${t}-aq`,AR:`${t}-ar`,AS:`${t}-as`,AT:`${t}-at`,AU:`${t}-au`,AW:`${t}-aw`,AX:`${t}-ax`,AZ:`${t}-az`,BA:`${t}-ba`,BB:`${t}-bb`,BD:`${t}-bd`,BE:`${t}-be`,BF:`${t}-bf`,BG:`${t}-bg`,BH:`${t}-bh`,BI:`${t}-bi`,BJ:`${t}-bj`,BL:`${t}-bl`,BM:`${t}-bm`,BN:`${t}-bn`,BO:`${t}-bo`,BQ:`${t}-bq`,BR:`${t}-br`,BS:`${t}-bs`,BT:`${t}-bt`,BV:`${t}-bv`,BW:`${t}-bw`,BY:`${t}-by`,BZ:`${t}-bz`,CA:`${t}-ca`,CC:`${t}-cc`,CD:`${t}-cd`,CF:`${t}-cf`,CG:`${t}-cg`,CH:`${t}-ch`,CI:`${t}-ci`,CK:`${t}-ck`,CL:`${t}-cl`,CM:`${t}-cm`,CN:`${t}-cn`,CO:`${t}-co`,CR:`${t}-cr`,CU:`${t}-cu`,CV:`${t}-cv`,CW:`${t}-cw`,CX:`${t}-cx`,CY:`${t}-cy`,CZ:`${t}-cz`,DE:`${t}-de`,DJ:`${t}-dj`,DK:`${t}-dk`,DM:`${t}-dm`,DO:`${t}-do`,DZ:`${t}-dz`,EC:`${t}-ec`,EE:`${t}-ee`,EG:`${t}-eg`,EH:`${t}-eh`,ER:`${t}-er`,ES:`${t}-es`,ET:`${t}-et`,FI:`${t}-fi`,FJ:`${t}-fj`,FK:`${t}-fk`,FM:`${t}-fm`,FO:`${t}-fo`,FR:`${t}-fr`,GA:`${t}-ga`,GB:`${t}-gb`,GD:`${t}-gd`,GE:`${t}-ge`,GF:`${t}-gf`,GG:`${t}-gg`,GH:`${t}-gh`,GI:`${t}-gi`,GL:`${t}-gl`,GM:`${t}-gm`,GN:`${t}-gn`,GP:`${t}-gp`,GQ:`${t}-gq`,GR:`${t}-gr`,GT:`${t}-gt`,GU:`${t}-gu`,GW:`${t}-gw`,GY:`${t}-gy`,HK:`${t}-hk`,HM:`${t}-hm`,HN:`${t}-hn`,HR:`${t}-hr`,HT:`${t}-ht`,HU:`${t}-hu`,ID:`${t}-id`,IE:`${t}-ie`,IL:`${t}-il`,IM:`${t}-im`,IN:`${t}-in`,IO:`${t}-io`,IQ:`${t}-iq`,IR:`${t}-ir`,IS:`${t}-is`,IT:`${t}-it`,JE:`${t}-je`,JM:`${t}-jm`,JO:`${t}-jo`,JP:`${t}-jp`,KE:`${t}-ke`,KG:`${t}-kg`,KH:`${t}-kh`,KI:`${t}-ki`,KM:`${t}-km`,KN:`${t}-kn`,KP:`${t}-kp`,KR:`${t}-kr`,KW:`${t}-kw`,KY:`${t}-ky`,KZ:`${t}-kz`,LA:`${t}-la`,LB:`${t}-lb`,LC:`${t}-lc`,LI:`${t}-li`,LK:`${t}-lk`,LR:`${t}-lr`,LS:`${t}-ls`,LT:`${t}-lt`,LU:`${t}-lu`,LV:`${t}-lv`,LY:`${t}-ly`,MA:`${t}-ma`,MC:`${t}-mc`,MD:`${t}-md`,ME:`${t}-me`,MF:`${t}-mf`,MG:`${t}-mg`,MH:`${t}-mh`,MK:`${t}-mk`,ML:`${t}-ml`,MM:`${t}-mm`,MN:`${t}-mn`,MO:`${t}-mo`,MP:`${t}-mp`,MQ:`${t}-mq`,MR:`${t}-mr`,MS:`${t}-ms`,MT:`${t}-mt`,MU:`${t}-mu`,MV:`${t}-mv`,MW:`${t}-mw`,MX:`${t}-mx`,MY:`${t}-my`,MZ:`${t}-mz`,NA:`${t}-na`,NC:`${t}-nc`,NE:`${t}-ne`,NF:`${t}-nf`,NG:`${t}-ng`,NI:`${t}-ni`,NL:`${t}-nl`,NO:`${t}-no`,NP:`${t}-np`,NR:`${t}-nr`,NU:`${t}-nu`,NZ:`${t}-nz`,OM:`${t}-om`,PA:`${t}-pa`,PE:`${t}-pe`,PF:`${t}-pf`,PG:`${t}-pg`,PH:`${t}-ph`,PK:`${t}-pk`,PL:`${t}-pl`,PM:`${t}-pm`,PN:`${t}-pn`,PR:`${t}-pr`,PS:`${t}-ps`,PT:`${t}-pt`,PW:`${t}-pw`,PY:`${t}-py`,QA:`${t}-qa`,RE:`${t}-re`,RO:`${t}-ro`,RS:`${t}-rs`,RU:`${t}-ru`,RW:`${t}-rw`,SA:`${t}-sa`,SB:`${t}-sb`,SC:`${t}-sc`,SD:`${t}-sd`,SE:`${t}-se`,SG:`${t}-sg`,SH:`${t}-sh`,SI:`${t}-si`,SJ:`${t}-sj`,SK:`${t}-sk`,SL:`${t}-sl`,SM:`${t}-sm`,SN:`${t}-sn`,SO:`${t}-so`,SR:`${t}-sr`,SS:`${t}-ss`,ST:`${t}-st`,SV:`${t}-sv`,SX:`${t}-sx`,SY:`${t}-sy`,SZ:`${t}-sz`,TC:`${t}-tc`,TD:`${t}-td`,TG:`${t}-tg`,TH:`${t}-th`,TJ:`${t}-tj`,TK:`${t}-tk`,TL:`${t}-tl`,TM:`${t}-tm`,TN:`${t}-tn`,TO:`${t}-to`,TR:`${t}-tr`,TT:`${t}-tt`,TV:`${t}-tv`,TW:`${t}-tw`,TZ:`${t}-tz`,UA:`${t}-ua`,UG:`${t}-ug`,US:`${t}-us`,UY:`${t}-uy`,UZ:`${t}-uz`,VA:`${t}-va`,VC:`${t}-vc`,VE:`${t}-ve`,VG:`${t}-vg`,VI:`${t}-vi`,VN:`${t}-vn`,VU:`${t}-vu`,WF:`${t}-wf`,WS:`${t}-ws`,YE:`${t}-ye`,YT:`${t}-yt`,ZA:`${t}-za`,ZM:`${t}-zm`,ZW:`${t}-zw`});let y=g;exports.CacheItem=N;exports.GEO_FLAG_ICON_NAME=t;exports.GeoFlag=y;exports.GeoIntl=L;exports.toDate=l;
