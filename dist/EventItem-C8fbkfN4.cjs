"use strict";var A=Object.defineProperty;var w=(r,e,i)=>e in r?A(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var l=(r,e,i)=>(w(r,typeof e!="symbol"?e+"":e,i),i);const p=require("./forEach-AdslABYj.cjs"),u=require("./Api-BZYZ3fW3.cjs"),f=require("./toNumber-Bjrk1Cck.cjs"),h=require("./getElement-BOMHgffA.cjs"),v=require("./toArray-C_3YLL9r.cjs");class N{constructor(e){l(this,"cache");l(this,"comparisons",[]);this.callback=e}getCache(e){return this.isUpdate(e)&&this.setCache(),this.cache}async getCacheAsync(e){return this.isUpdate(e)&&await this.setCacheAsync(),this.cache}setCache(){this.cache=this.callback()}async setCacheAsync(){this.cache=await this.callback()}isUpdate(e){return this.cache===void 0||this.comparisons.length!==e.length||this.comparisons.findIndex((i,n)=>i!==e[n])>=0?(this.comparisons=[...e],!0):!1}}function d(r){if(r instanceof Date)return r;if(u.isNull(r))return new Date;if(typeof r=="number")return new Date(r);let e=r,i="";r.replace(/^([\s\S]+)([-+]\d{2}:?\d{2})$/,(s,a,o)=>(e=a,i=o,s));const n=(/^\d{4}\d{2}\d{2}$/.exec(e)&&`${e.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3")}T00:00:00`)??(/^\d{4}\d{2}$/.exec(e)&&`${e.replace(/^(\d{4})(\d{2})$/,"$1-$2")}-01T00:00:00`)??(/^\d{4}-\d{2}-\d{2}$/.exec(e)&&`${e}T00:00:00`)??(/^\d{4}-\d{2}$/.exec(e)&&`${e}-01T00:00:00`)??(/^\d{4}$/.exec(e)&&`${e}-01-01T00:00:00`)??(/^\d{2}:\d{2}$/.exec(e)&&`2000-01-01T${e}:00`)??(/^\d{2}:\d{2}:\d{2}$/.exec(e)&&`2000-01-01T${e}`)??e.replace(" ","T");return new Date(`${n}${i}`)}class M{constructor(e=u.Geo.getLocation()){l(this,"geo");this.geo=u.Geo.find(e);const i=this.getLocation();if(i in y)return y[i];y[i]=this}getLocation(){return this.geo.standard}getFirstDay(){return this.geo.firstDay}display(e,i){let n={type:"language"},s;i&&(typeof i=="string"?n.type=i:n={...n,...i});try{e?s=new Intl.DisplayNames(this.getLocation(),n).of(e):n.type==="language"?s=new Intl.DisplayNames(this.getLocation(),n).of(this.geo.language):n.type==="region"&&(s=new Intl.DisplayNames(this.getLocation(),n).of(this.geo.country))}catch{}return s??e??""}languageName(e,i){const n={type:"language",style:i};return this.display(e,n)}countryName(e,i){const n={type:"region",style:i};return this.display(e,n)}number(e,i){var n,s;return((s=(n=this.numberObject(i))==null?void 0:n.format)==null?void 0:s.call(n,f.toNumber(e)))||e.toString()}decimal(){var e,i,n,s,a;return((a=(s=(n=(i=(e=this.numberObject())==null?void 0:e.formatToParts)==null?void 0:i.call(e,1.2))==null?void 0:n.find)==null?void 0:s.call(n,o=>o.type==="decimal"))==null?void 0:a.value)||"."}currency(e,i,n=!1){const s={style:"currency",currencyDisplay:"symbol",...typeof i=="string"?{currency:i}:i||{}},a=e.toString().replace(/^([\S\s]+[\d ])([a-zA-Z]{3})$/i,(...o)=>(s.currency=o[2].toUpperCase(),o[1]));if(n){const o=this.numberObject(s);return o?o.formatToParts(f.toNumber(e)).filter($=>["literal","currency"].indexOf($.type)===-1).join(""):e.toString()}else return this.number(a,s)}unit(e,i){const n={style:"unit",...typeof i=="string"?{unit:i}:i||{}},s=e.toString().replace(/^([\S\s]+[\d ])([a-zA-Z]+)$/i,(...a)=>(n.unit=a[2].toLowerCase(),a[1]));return this.number(s,n)}percent(e,i){return this.number(e,{style:"percent",...i||{}})}percentBy100(e,i){return this.percent(f.toNumber(e)/100,i)}date(e,i,n,s){const a=d(e),o=typeof n=="string",$=this.dateOptions(i,o?n:"short");return s&&($.hour12=!1),o||Object.assign($,n),a.toLocaleString(this.getLocation(),$)}relative(e,i,n){const s=d(e),a=n||new Date,o={numeric:"auto",...typeof i=="string"?{style:i}:i||{}};let $="second",c=(s.getTime()-a.getTime())/1e3;Math.abs(c)>=60&&($="minute",c/=60,Math.abs(c)>=60&&($="hour",c/=60,Math.abs(c)>=24&&($="day",c/=24,Math.abs(c)>=30&&($="month",c/=30,Math.abs(c)>=12&&($="year",c/=12)))));try{return new Intl.RelativeTimeFormat(this.getLocation(),o).format(Math.round(c),$)}catch{}return""}relativeLimit(e,i,n,s,a,o,$){const c=d(e),m=n||new Date,E=new Date(m),L=new Date(m);return E.setDate(m.getDate()-i),L.setDate(m.getDate()+i),c>=E&&c<=L?this.relative(c,s,m):this.date(c,o,a,$)}month(e,i){try{return Intl.DateTimeFormat(this.getLocation(),{month:i||"long"}).format(d(e))}catch{}return""}months(e){const i=[{label:"",value:void 0}];try{const n=new Date,s=Intl.DateTimeFormat(this.getLocation(),{month:e||"long"});for(let a=0;a<12;a++)n.setMonth(a),i.push({label:s.format(n).replace(/^./,o=>o.toUpperCase()),value:a+1})}catch{}return i}weekday(e,i){try{return Intl.DateTimeFormat(this.getLocation(),{weekday:i||"long"}).format(d(e))}catch{}return""}weekdays(e){const i=[{label:"",value:void 0}];try{const n=new Date,s=Intl.DateTimeFormat(this.getLocation(),{weekday:e||"long"}),a=n.getDay()+(this.geo.firstDay==="Mo"?-1:1);n.setDate(n.getDate()-a);for(let o=0;o<7;o++)i.push({label:s.format(n).replace(/^./,$=>$.toUpperCase()),value:n.getDay()}),n.setDate(n.getDate()+1)}catch{}return i}time(e){return this.date(e,"time")}sort(e,i=(n,s)=>[n,s]){const n=new Intl.Collator(this.getLocation());return e.sort((s,a)=>n.compare(...i(s,a)))}numberObject(e){try{return new Intl.NumberFormat(this.getLocation(),e)}catch{}}dateOptions(e,i="short"){const n={};return["full","datetime","date",void 0,"year-month","year"].indexOf(e)!==-1&&(n.year="numeric"),["full","datetime","date",void 0,"year-month","month"].indexOf(e)!==-1&&(n.month=i),["full","datetime","date",void 0,"day"].indexOf(e)!==-1&&(n.day="2-digit"),e!==void 0&&(["full","datetime","time","hour-minute","hour"].indexOf(e)!==-1&&(n.hour="2-digit"),["full","datetime","time","hour-minute","minute"].indexOf(e)!==-1&&(n.minute="2-digit"),["full","time","second"].indexOf(e)!==-1&&(n.second="2-digit")),n}}const y={},t="@flag",g=class g{constructor(e=u.Geo.getLocation()){this.code=e}get(e=this.code){var n;const i=u.Geo.find(e);if(i){const s=this.getCountry(i);return{language:this.getLanguage(i),country:s,standard:i.standard,icon:(n=g.flags)==null?void 0:n[i.country],label:s,value:i.country}}}getFlag(e=this.code){var i;return(i=this.get(e))==null?void 0:i.icon}getList(e){return p.forEach(this.getCodes(e),i=>this.get(i))}getNational(e){return p.forEach(this.getList(e),i=>{const n=new g(i.language).get(i.standard);return{...i,nationalLanguage:n==null?void 0:n.language,nationalCountry:n==null?void 0:n.country}})}setCode(e){return this.code=e,this}getLocation(){return new M(this.code)}getCodes(e){return e??Object.keys(g.flags)}getLanguage(e){return this.getLocation().languageName(e.language)}getCountry(e){return this.getLocation().countryName(e.country)}};l(g,"flags",{AD:`${t}-ad`,AE:`${t}-ae`,AF:`${t}-af`,AG:`${t}-ag`,AI:`${t}-ai`,AL:`${t}-al`,AM:`${t}-am`,AN:`${t}-an`,AO:`${t}-ao`,AQ:`${t}-aq`,AR:`${t}-ar`,AS:`${t}-as`,AT:`${t}-at`,AU:`${t}-au`,AW:`${t}-aw`,AX:`${t}-ax`,AZ:`${t}-az`,BA:`${t}-ba`,BB:`${t}-bb`,BD:`${t}-bd`,BE:`${t}-be`,BF:`${t}-bf`,BG:`${t}-bg`,BH:`${t}-bh`,BI:`${t}-bi`,BJ:`${t}-bj`,BL:`${t}-bl`,BM:`${t}-bm`,BN:`${t}-bn`,BO:`${t}-bo`,BQ:`${t}-bq`,BR:`${t}-br`,BS:`${t}-bs`,BT:`${t}-bt`,BV:`${t}-bv`,BW:`${t}-bw`,BY:`${t}-by`,BZ:`${t}-bz`,CA:`${t}-ca`,CC:`${t}-cc`,CD:`${t}-cd`,CF:`${t}-cf`,CG:`${t}-cg`,CH:`${t}-ch`,CI:`${t}-ci`,CK:`${t}-ck`,CL:`${t}-cl`,CM:`${t}-cm`,CN:`${t}-cn`,CO:`${t}-co`,CR:`${t}-cr`,CU:`${t}-cu`,CV:`${t}-cv`,CW:`${t}-cw`,CX:`${t}-cx`,CY:`${t}-cy`,CZ:`${t}-cz`,DE:`${t}-de`,DJ:`${t}-dj`,DK:`${t}-dk`,DM:`${t}-dm`,DO:`${t}-do`,DZ:`${t}-dz`,EC:`${t}-ec`,EE:`${t}-ee`,EG:`${t}-eg`,EH:`${t}-eh`,ER:`${t}-er`,ES:`${t}-es`,ET:`${t}-et`,FI:`${t}-fi`,FJ:`${t}-fj`,FK:`${t}-fk`,FM:`${t}-fm`,FO:`${t}-fo`,FR:`${t}-fr`,GA:`${t}-ga`,GB:`${t}-gb`,GD:`${t}-gd`,GE:`${t}-ge`,GF:`${t}-gf`,GG:`${t}-gg`,GH:`${t}-gh`,GI:`${t}-gi`,GL:`${t}-gl`,GM:`${t}-gm`,GN:`${t}-gn`,GP:`${t}-gp`,GQ:`${t}-gq`,GR:`${t}-gr`,GT:`${t}-gt`,GU:`${t}-gu`,GW:`${t}-gw`,GY:`${t}-gy`,HK:`${t}-hk`,HM:`${t}-hm`,HN:`${t}-hn`,HR:`${t}-hr`,HT:`${t}-ht`,HU:`${t}-hu`,ID:`${t}-id`,IE:`${t}-ie`,IL:`${t}-il`,IM:`${t}-im`,IN:`${t}-in`,IO:`${t}-io`,IQ:`${t}-iq`,IR:`${t}-ir`,IS:`${t}-is`,IT:`${t}-it`,JE:`${t}-je`,JM:`${t}-jm`,JO:`${t}-jo`,JP:`${t}-jp`,KE:`${t}-ke`,KG:`${t}-kg`,KH:`${t}-kh`,KI:`${t}-ki`,KM:`${t}-km`,KN:`${t}-kn`,KP:`${t}-kp`,KR:`${t}-kr`,KW:`${t}-kw`,KY:`${t}-ky`,KZ:`${t}-kz`,LA:`${t}-la`,LB:`${t}-lb`,LC:`${t}-lc`,LI:`${t}-li`,LK:`${t}-lk`,LR:`${t}-lr`,LS:`${t}-ls`,LT:`${t}-lt`,LU:`${t}-lu`,LV:`${t}-lv`,LY:`${t}-ly`,MA:`${t}-ma`,MC:`${t}-mc`,MD:`${t}-md`,ME:`${t}-me`,MF:`${t}-mf`,MG:`${t}-mg`,MH:`${t}-mh`,MK:`${t}-mk`,ML:`${t}-ml`,MM:`${t}-mm`,MN:`${t}-mn`,MO:`${t}-mo`,MP:`${t}-mp`,MQ:`${t}-mq`,MR:`${t}-mr`,MS:`${t}-ms`,MT:`${t}-mt`,MU:`${t}-mu`,MV:`${t}-mv`,MW:`${t}-mw`,MX:`${t}-mx`,MY:`${t}-my`,MZ:`${t}-mz`,NA:`${t}-na`,NC:`${t}-nc`,NE:`${t}-ne`,NF:`${t}-nf`,NG:`${t}-ng`,NI:`${t}-ni`,NL:`${t}-nl`,NO:`${t}-no`,NP:`${t}-np`,NR:`${t}-nr`,NU:`${t}-nu`,NZ:`${t}-nz`,OM:`${t}-om`,PA:`${t}-pa`,PE:`${t}-pe`,PF:`${t}-pf`,PG:`${t}-pg`,PH:`${t}-ph`,PK:`${t}-pk`,PL:`${t}-pl`,PM:`${t}-pm`,PN:`${t}-pn`,PR:`${t}-pr`,PS:`${t}-ps`,PT:`${t}-pt`,PW:`${t}-pw`,PY:`${t}-py`,QA:`${t}-qa`,RE:`${t}-re`,RO:`${t}-ro`,RS:`${t}-rs`,RU:`${t}-ru`,RW:`${t}-rw`,SA:`${t}-sa`,SB:`${t}-sb`,SC:`${t}-sc`,SD:`${t}-sd`,SE:`${t}-se`,SG:`${t}-sg`,SH:`${t}-sh`,SI:`${t}-si`,SJ:`${t}-sj`,SK:`${t}-sk`,SL:`${t}-sl`,SM:`${t}-sm`,SN:`${t}-sn`,SO:`${t}-so`,SR:`${t}-sr`,SS:`${t}-ss`,ST:`${t}-st`,SV:`${t}-sv`,SX:`${t}-sx`,SY:`${t}-sy`,SZ:`${t}-sz`,TC:`${t}-tc`,TD:`${t}-td`,TG:`${t}-tg`,TH:`${t}-th`,TJ:`${t}-tj`,TK:`${t}-tk`,TL:`${t}-tl`,TM:`${t}-tm`,TN:`${t}-tn`,TO:`${t}-to`,TR:`${t}-tr`,TT:`${t}-tt`,TV:`${t}-tv`,TW:`${t}-tw`,TZ:`${t}-tz`,UA:`${t}-ua`,UG:`${t}-ug`,US:`${t}-us`,UY:`${t}-uy`,UZ:`${t}-uz`,VA:`${t}-va`,VC:`${t}-vc`,VE:`${t}-ve`,VG:`${t}-vg`,VI:`${t}-vi`,VN:`${t}-vn`,VU:`${t}-vu`,WF:`${t}-wf`,WS:`${t}-ws`,YE:`${t}-ye`,YT:`${t}-yt`,ZA:`${t}-za`,ZM:`${t}-zm`,ZW:`${t}-zw`});let b=g;function I(r,e){return Math.floor(Math.random()*(e-r+1)+r)}let D=I(1e5,9e5);function G(r,e){const i=h.getElement(r);return i?(u.isFilled(i.id)||i.setAttribute("id",`id-${D++}`),e?`#${i.id}${e}`.trim():i.id):`id-${D++}`}function C(r){return h.isWindow(r)?r:h.getElement(r)}function T(r){var e;return!!((e=h.getElement(r))!=null&&e.closest("html"))}class S{constructor(e,i=["click"],n,s,a){l(this,"element");l(this,"elementControl");l(this,"elementControlEdit");l(this,"type");l(this,"listenerRecent",e=>{var i,n;T(this.elementControl)?((i=this.listener)==null||i.call(this.element,e,this.detail),p.isObject(this.options)&&((n=this.options)!=null&&n.once)&&this.stop()):this.stop()});l(this,"activity",!1);l(this,"activityItems",[]);this.listener=n,this.options=s,this.detail=a,this.element=C(e),this.elementControl=h.getElement(e),this.type=v.toArray(i)}isActive(){return this.activity}setElement(e){const i=C(e);return this.elementControlEdit||(this.elementControl=h.getElement(e)),this.element=i,this.reset(),this}setElementControl(e){return this.elementControl=h.getElement(e),this.elementControlEdit=!u.isNull(this.elementControl),this.elementControlEdit||(this.elementControl=h.getElement(this.element)),this}setType(e){return this.type=v.toArray(e),this.reset(),this}setListener(e){return this.listener=e,this}setOptions(e){return this.options=e,this.reset(),this}setDetail(e){return this.detail=e,this}dispatch(e=this.detail){return this.type.forEach(i=>{var n;return(n=this.element)==null?void 0:n.dispatchEvent(new CustomEvent(i,{detail:e}))}),this}start(){return this.activity||(this.activity=!0,this.activityItems=[],this.type.forEach(e=>{this.element&&!(e==="resize"&&this.makeResize())&&!(e==="scroll-sync"&&this.makeScroll())&&(this.element.addEventListener(e,this.listenerRecent,this.options),this.activityItems.push({element:this.element,type:e}))})),this}stop(){return this.activity&&(this.activity=!1,this.activityItems.forEach(({element:e,type:i,listener:n,observer:s})=>{s?s.disconnect():n?e==null||e.removeEventListener(i,n):e==null||e.removeEventListener(i,this.listenerRecent)})),this}toggle(e){return e?this.start():this.stop()}reset(){return this.activity&&(this.stop(),this.start()),this}isObserver(){return"ResizeObserver"in window}makeResize(){if(this.element&&this.element instanceof HTMLElement&&this.element!==document.body&&this.isObserver()){const e=new ResizeObserver(i=>this.listenerRecent(i==null?void 0:i[0]));return e.observe(this.element),this.activityItems.push({element:this.element,type:"resize",observer:e}),!0}return!1}makeScroll(){if(this.element){let e=!1;const i=n=>{e||(e=!0,requestAnimationFrame(()=>{this.listenerRecent(n),e=!1}))};return this.element.addEventListener("scroll",i,this.options),this.element.addEventListener("resize",i,this.options),this.activityItems.push({element:this.element,type:"scroll",listener:i},{element:this.element,type:"resize",listener:i}),!0}return!1}}exports.CacheItem=N;exports.EventItem=S;exports.GEO_FLAG_ICON_NAME=t;exports.GeoFlag=b;exports.GeoIntl=M;exports.getElementId=G;exports.getElementOrWindow=C;exports.isInDom=T;exports.random=I;exports.toDate=d;
