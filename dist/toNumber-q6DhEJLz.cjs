"use strict";var N=Object.defineProperty;var S=(r,t,e)=>t in r?N(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var n=(r,t,e)=>(S(r,typeof t!="symbol"?t+"":t,e),e);const c=require("vue"),h=require("./forEach-AdslABYj.cjs"),u=require("./toArray-C_3YLL9r.cjs");function o(r){return h.isObject(r)&&!Array.isArray(r)}function f(r){return r.toString().trim().replace(/[^\w- ]+/g,"").replace(/ +/g,"-").replace(new RegExp("(?<=[A-Z])([A-Z])","g"),t=>`${t.toLowerCase()}`).replace(/-+([a-zA-Z0-9])/g,(...t)=>`${t[1].toUpperCase()}`).replace(/^([A-Z])/,t=>`${t.toLowerCase()}`)}function l(r){return c.isRef(r)?r.value:r}function g(r){return r&&"class"in r&&typeof r.class=="string"?r.class:void 0}function m(r,t,e){const s=g(t);return e&&s?`${e}.${s}`:e||s||r}function d(r,t,e,s){const i=m(r,t,s);return c.h(r,{key:i,...t},e)}class y{constructor(t={},e){this.components=t,this.modification=e}is(t){return t in this.components}get(t){var e;return(e=this.components)==null?void 0:e[t]}getModification(t,e){var s;if(t){const i=l((s=this.modification)==null?void 0:s[t]);if(i&&o(i)){const a={};return h.forEach(i,(A,k)=>{a[k]=l(A)}),e&&Object.assign(a,e),a}}return e}render(t,e,s,i){const a=this.renderOne(t,e,s,i);return a?[a]:[]}renderOne(t,e,s,i){if(this.is(t)){const a=i??t;return d(this.get(t),this.getModification(a,e),s,a)}}renderAdd(t,e,s,i,a){return t.push(...this.render(e,s,i,a)),this}}class D{constructor(t,e,s){n(this,"name");n(this,"element",c.ref());n(this,"refs");n(this,"components");n(this,"emits");n(this,"classes");n(this,"classesSub");n(this,"styles");n(this,"stylesSub");n(this,"attrs");n(this,"slots");n(this,"data");n(this,"dataExpose");this.props=e,this.name=this.initName(t),this.refs=this.props?c.toRefs(this.props):{},this.components=new y(s==null?void 0:s.components,s==null?void 0:s.compMod),this.emits=s==null?void 0:s.emits,this.classes=s==null?void 0:s.classes,this.styles=s==null?void 0:s.styles,this.attrs=c.useAttrs(),this.slots=c.useSlots()}init(){return this.makeOptions(),this.classesSub=c.computed(()=>this.initClasses()),this.stylesSub=c.computed(()=>this.initStyles()),this.data={name:this.getName(),element:this.element,classes:c.computed(()=>this.updateClasses()),styles:c.computed(()=>this.updateStyles()),...this.initSetup()},this.dataExpose=this.initExpose(),this}getName(){return this.name.join("-")}getSubClass(t){return`${this.getName()}__${u.toArray(t).join("__")}`}getStatusClass(t){return`${this.getName()}--${u.toArray(t).join("--")}`}getStyle(t){return`--${this.getName()}-sys-${u.toArray(t).join("-")}`}getAttrs(){const t={...this.attrs??{}};return"class"in t&&delete t.class,"style"in t&&delete t.style,t}setup(){return this.data??{}}expose(){return this.dataExpose??{}}render(){return()=>this.initRender()}initSlot(t,e,s={}){var i;if(this.slots&&((i=this.slots)!=null&&i[t])&&typeof this.slots[t]=="function"){const a=this.slots[t](s);return e&&e.push(a),a}}toClassName(t){if(h.isObject(t)){const e={};return h.forEach(t,(s,i)=>{i.match(/\?\?/)?e[i.replace(/\?\?/,this.getName())]=s:i.match(/\?/)?e[i.replace(/\?/,this.name[0])]=s:e[i]=s}),e}return{}}initName(t){return h.forEach(t.split(".",2),e=>f(e))}updateClasses(){var s,i;const t=(s=this.classesSub)==null?void 0:s.value,e=(i=this.classes)==null?void 0:i.value;return t&&e?{...t,...e,main:{...this.toClass(t==null?void 0:t.main),...this.toClass(e==null?void 0:e.main)}}:e??{main:{}}}updateStyles(){var s,i;const t=(s=this.stylesSub)==null?void 0:s.value,e=(i=this.styles)==null?void 0:i.value;return t&&e?{...t,...e}:e??{}}toClass(t){return o(t)?t:Array.isArray(t)?{[t.filter(s=>typeof s=="string"&&s.trim()!=="").join(" ")]:!0}:typeof t=="string"?{[t]:!0}:{}}}function p(r){return Array.isArray(r)}class C{constructor(t,e=Object.keys(t)){n(this,"cache",{});this.props=t,this.watch=e}is(t){return p(t)?!!t.find(e=>this.isDifferent(e)):this.isDifferent(t)}isChanged(){const t=this.props;return!!this.watch.find(e=>e in t&&this.isDifferent(e))}update(){const t=this.props;this.watch.forEach(e=>{e in t&&this.isDifferent(e)&&(this.cache[e]=t[e])})}isDifferent(t){var e,s;return((e=this.cache)==null?void 0:e[t])!==((s=this.props)==null?void 0:s[t])}}class b{constructor(t,e,s){n(this,"event",{});n(this,"changed");this.props=t,this.callback=e,this.changed=new C(t,s)}make(t){return this.makeCallback(t),this}is(t){return t in this.props}isChanged(t,e){return!(t in this.event)||this.changed.is(e||t)}makeCallback(t=!1){(t||this.changed.isChanged())&&(this.initEvent(),this.makeCallbackItem(),this.changed.update())}makeCallbackItem(){this.callback&&this.callback(this.event)}}class j extends b{make(t){return this.makeCallback(t).then(),this}async makeCallback(t){(t||this.changed.isChanged())&&(await this.initEvent(),this.makeCallbackItem(),this.changed.update())}}function E(r){if(typeof r=="number")return r;let t=r.replace(/[^\d., ]+/ig,"");return t.match(/( [0-9]{3}[ ,.]|[0-9] [0-9])/ig)?t=t.replace(/ /ig,"").replace(/,/ig,"."):t.match(/,[0-9]{3}[,.]/ig)?t=t.replace(/,/ig,""):t.match(/[.][0-9]{3}[,.]/ig)?t=t.replace(/[.]/ig,"").replace(/,/ig,"."):t=t.replace(/,/ig,"."),parseFloat(t)}exports.DesignAbstract=b;exports.DesignAsyncAbstract=j;exports.DesignChanged=C;exports.DesignComponents=y;exports.DesignConstructorAbstract=D;exports.getClassName=g;exports.getIndexForRender=m;exports.getRef=l;exports.isArray=p;exports.isObjectNotArray=o;exports.render=d;exports.toCamelCase=f;exports.toNumber=E;
