"use strict";var T=Object.defineProperty;var A=(a,e,i)=>e in a?T(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var l=(a,e,i)=>(A(a,typeof e!="symbol"?e+"":e,i),i);const p=require("./forEach-AdslABYj.cjs"),g=require("./Api-DHkrMuUs.cjs"),D=require("./useEnv-DHcFv9Fs.cjs"),f=require("./toNumber-Bjrk1Cck.cjs"),h=require("./getElement-BOMHgffA.cjs"),v=require("./toArray-C_3YLL9r.cjs");class w{constructor(e){l(this,"cache");l(this,"comparisons",[]);this.callback=e}getCache(e){return this.isUpdate(e)&&this.setCache(),this.cache}async getCacheAsync(e){return this.isUpdate(e)&&await this.setCacheAsync(),this.cache}setCache(){this.cache=this.callback()}async setCacheAsync(){this.cache=await this.callback()}isUpdate(e){return this.cache===void 0||this.comparisons.length!==e.length||this.comparisons.findIndex((i,s)=>i!==e[s])>=0?(this.comparisons=[...e],!0):!1}}function m(a){if(a instanceof Date)return a;if(D.isNull(a))return new Date;if(typeof a=="number")return new Date(a);let e=a,i="";a.replace(/^([\s\S]+)([-+]\d{2}:?\d{2})$/,(n,r,o)=>(e=r,i=o,n));const s=(/^\d{4}\d{2}\d{2}$/.exec(e)&&`${e.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3")}T00:00:00`)??(/^\d{4}\d{2}$/.exec(e)&&`${e.replace(/^(\d{4})(\d{2})$/,"$1-$2")}-01T00:00:00`)??(/^\d{4}-\d{2}-\d{2}$/.exec(e)&&`${e}T00:00:00`)??(/^\d{4}-\d{2}$/.exec(e)&&`${e}-01T00:00:00`)??(/^\d{4}$/.exec(e)&&`${e}-01-01T00:00:00`)??(/^\d{2}:\d{2}$/.exec(e)&&`2000-01-01T${e}:00`)??(/^\d{2}:\d{2}:\d{2}$/.exec(e)&&`2000-01-01T${e}`)??e.replace(" ","T");return new Date(`${s}${i}`)}class M{constructor(e=g.Geo.getLocation()){l(this,"geo");this.geo=g.Geo.find(e);const i=this.getLocation();if(i in y)return y[i];y[i]=this}getLocation(){return this.geo.standard}getFirstDay(){return this.geo.firstDay}display(e,i){let s={type:"language"},n;i&&(typeof i=="string"?s.type=i:s={...s,...i});try{e?n=new Intl.DisplayNames(this.getLocation(),s).of(e):s.type==="language"?n=new Intl.DisplayNames(this.getLocation(),s).of(this.geo.language):s.type==="region"&&(n=new Intl.DisplayNames(this.getLocation(),s).of(this.geo.country))}catch{}return n??e??""}languageName(e,i){const s={type:"language",style:i};return this.display(e,s)}countryName(e,i){const s={type:"region",style:i};return this.display(e,s)}number(e,i){var s,n;return((n=(s=this.numberObject(i))==null?void 0:s.format)==null?void 0:n.call(s,f.toNumber(e)))||e.toString()}decimal(){var e,i,s,n,r;return((r=(n=(s=(i=(e=this.numberObject())==null?void 0:e.formatToParts)==null?void 0:i.call(e,1.2))==null?void 0:s.find)==null?void 0:n.call(s,o=>o.type==="decimal"))==null?void 0:r.value)||"."}currency(e,i,s=!1){const n={style:"currency",currencyDisplay:"symbol",...typeof i=="string"?{currency:i}:i||{}},r=e.toString().replace(/^([\S\s]+[\d ])([a-zA-Z]{3})$/i,(...o)=>(n.currency=o[2].toUpperCase(),o[1]));if(s){const o=this.numberObject(n);return o?o.formatToParts(f.toNumber(e)).filter($=>["literal","currency"].indexOf($.type)===-1).join(""):e.toString()}else return this.number(r,n)}unit(e,i){const s={style:"unit",...typeof i=="string"?{unit:i}:i||{}},n=e.toString().replace(/^([\S\s]+[\d ])([a-zA-Z]+)$/i,(...r)=>(s.unit=r[2].toLowerCase(),r[1]));return this.number(n,s)}percent(e,i){return this.number(e,{style:"percent",...i||{}})}percentBy100(e,i){return this.percent(f.toNumber(e)/100,i)}date(e,i,s,n){const r=m(e),o=typeof s=="string",$=this.dateOptions(i,o?s:"short");return n&&($.hour12=!1),o||Object.assign($,s),r.toLocaleString(this.getLocation(),$)}relative(e,i,s){const n=m(e),r=s||new Date,o={numeric:"auto",...typeof i=="string"?{style:i}:i||{}};let $="second",c=(n.getTime()-r.getTime())/1e3;Math.abs(c)>=60&&($="minute",c/=60,Math.abs(c)>=60&&($="hour",c/=60,Math.abs(c)>=24&&($="day",c/=24,Math.abs(c)>=30&&($="month",c/=30,Math.abs(c)>=12&&($="year",c/=12)))));try{return new Intl.RelativeTimeFormat(this.getLocation(),o).format(Math.round(c),$)}catch{}return""}relativeLimit(e,i,s,n,r,o,$){const c=m(e),u=s||new Date,E=new Date(u),L=new Date(u);return E.setDate(u.getDate()-i),L.setDate(u.getDate()+i),c>=E&&c<=L?this.relative(c,n,u):this.date(c,o,r,$)}month(e,i){try{return Intl.DateTimeFormat(this.getLocation(),{month:i||"long"}).format(m(e))}catch{}return""}months(e){const i=[{label:"",value:void 0}];try{const s=new Date,n=Intl.DateTimeFormat(this.getLocation(),{month:e||"long"});for(let r=0;r<12;r++)s.setMonth(r),i.push({label:n.format(s).replace(/^./,o=>o.toUpperCase()),value:r+1})}catch{}return i}weekday(e,i){try{return Intl.DateTimeFormat(this.getLocation(),{weekday:i||"long"}).format(m(e))}catch{}return""}weekdays(e){const i=[{label:"",value:void 0}];try{const s=new Date,n=Intl.DateTimeFormat(this.getLocation(),{weekday:e||"long"}),r=s.getDay()+(this.geo.firstDay==="Mo"?-1:1);s.setDate(s.getDate()-r);for(let o=0;o<7;o++)i.push({label:n.format(s).replace(/^./,$=>$.toUpperCase()),value:s.getDay()}),s.setDate(s.getDate()+1)}catch{}return i}time(e){return this.date(e,"time")}sort(e,i=(s,n)=>[s,n]){const s=new Intl.Collator(this.getLocation());return e.sort((n,r)=>s.compare(...i(n,r)))}numberObject(e){try{return new Intl.NumberFormat(this.getLocation(),e)}catch{}}dateOptions(e,i="short"){const s={};return["full","datetime","date",void 0,"year-month","year"].indexOf(e)!==-1&&(s.year="numeric"),["full","datetime","date",void 0,"year-month","month"].indexOf(e)!==-1&&(s.month=i),["full","datetime","date",void 0,"day"].indexOf(e)!==-1&&(s.day="2-digit"),e!==void 0&&(["full","datetime","time","hour-minute","hour"].indexOf(e)!==-1&&(s.hour="2-digit"),["full","datetime","time","hour-minute","minute"].indexOf(e)!==-1&&(s.minute="2-digit"),["full","time","second"].indexOf(e)!==-1&&(s.second="2-digit")),s}}const y={},t="@flag",d=class d{constructor(e=g.Geo.getLocation()){this.code=e}get(e=this.code){var s;const i=g.Geo.find(e);if(i){const n=this.getCountry(i);return{language:this.getLanguage(i),country:n,standard:i.standard,icon:(s=d.flags)==null?void 0:s[i.country],label:n,value:i.country}}}getFlag(e=this.code){var i;return(i=this.get(e))==null?void 0:i.icon}getList(e){return p.forEach(this.getCodes(e),i=>this.get(i))}getNational(e){return p.forEach(this.getList(e),i=>{const s=new d(i.language).get(i.standard);return{...i,nationalLanguage:s==null?void 0:s.language,nationalCountry:s==null?void 0:s.country}})}setCode(e){return this.code=e,this}getLocation(){return new M(this.code)}getCodes(e){return e??Object.keys(d.flags)}getLanguage(e){return this.getLocation().languageName(e.language)}getCountry(e){return this.getLocation().countryName(e.country)}};l(d,"flags",{AD:`${t}-ad`,AE:`${t}-ae`,AF:`${t}-af`,AG:`${t}-ag`,AI:`${t}-ai`,AL:`${t}-al`,AM:`${t}-am`,AN:`${t}-an`,AO:`${t}-ao`,AQ:`${t}-aq`,AR:`${t}-ar`,AS:`${t}-as`,AT:`${t}-at`,AU:`${t}-au`,AW:`${t}-aw`,AX:`${t}-ax`,AZ:`${t}-az`,BA:`${t}-ba`,BB:`${t}-bb`,BD:`${t}-bd`,BE:`${t}-be`,BF:`${t}-bf`,BG:`${t}-bg`,BH:`${t}-bh`,BI:`${t}-bi`,BJ:`${t}-bj`,BL:`${t}-bl`,BM:`${t}-bm`,BN:`${t}-bn`,BO:`${t}-bo`,BQ:`${t}-bq`,BR:`${t}-br`,BS:`${t}-bs`,BT:`${t}-bt`,BV:`${t}-bv`,BW:`${t}-bw`,BY:`${t}-by`,BZ:`${t}-bz`,CA:`${t}-ca`,CC:`${t}-cc`,CD:`${t}-cd`,CF:`${t}-cf`,CG:`${t}-cg`,CH:`${t}-ch`,CI:`${t}-ci`,CK:`${t}-ck`,CL:`${t}-cl`,CM:`${t}-cm`,CN:`${t}-cn`,CO:`${t}-co`,CR:`${t}-cr`,CU:`${t}-cu`,CV:`${t}-cv`,CW:`${t}-cw`,CX:`${t}-cx`,CY:`${t}-cy`,CZ:`${t}-cz`,DE:`${t}-de`,DJ:`${t}-dj`,DK:`${t}-dk`,DM:`${t}-dm`,DO:`${t}-do`,DZ:`${t}-dz`,EC:`${t}-ec`,EE:`${t}-ee`,EG:`${t}-eg`,EH:`${t}-eh`,ER:`${t}-er`,ES:`${t}-es`,ET:`${t}-et`,FI:`${t}-fi`,FJ:`${t}-fj`,FK:`${t}-fk`,FM:`${t}-fm`,FO:`${t}-fo`,FR:`${t}-fr`,GA:`${t}-ga`,GB:`${t}-gb`,GD:`${t}-gd`,GE:`${t}-ge`,GF:`${t}-gf`,GG:`${t}-gg`,GH:`${t}-gh`,GI:`${t}-gi`,GL:`${t}-gl`,GM:`${t}-gm`,GN:`${t}-gn`,GP:`${t}-gp`,GQ:`${t}-gq`,GR:`${t}-gr`,GT:`${t}-gt`,GU:`${t}-gu`,GW:`${t}-gw`,GY:`${t}-gy`,HK:`${t}-hk`,HM:`${t}-hm`,HN:`${t}-hn`,HR:`${t}-hr`,HT:`${t}-ht`,HU:`${t}-hu`,ID:`${t}-id`,IE:`${t}-ie`,IL:`${t}-il`,IM:`${t}-im`,IN:`${t}-in`,IO:`${t}-io`,IQ:`${t}-iq`,IR:`${t}-ir`,IS:`${t}-is`,IT:`${t}-it`,JE:`${t}-je`,JM:`${t}-jm`,JO:`${t}-jo`,JP:`${t}-jp`,KE:`${t}-ke`,KG:`${t}-kg`,KH:`${t}-kh`,KI:`${t}-ki`,KM:`${t}-km`,KN:`${t}-kn`,KP:`${t}-kp`,KR:`${t}-kr`,KW:`${t}-kw`,KY:`${t}-ky`,KZ:`${t}-kz`,LA:`${t}-la`,LB:`${t}-lb`,LC:`${t}-lc`,LI:`${t}-li`,LK:`${t}-lk`,LR:`${t}-lr`,LS:`${t}-ls`,LT:`${t}-lt`,LU:`${t}-lu`,LV:`${t}-lv`,LY:`${t}-ly`,MA:`${t}-ma`,MC:`${t}-mc`,MD:`${t}-md`,ME:`${t}-me`,MF:`${t}-mf`,MG:`${t}-mg`,MH:`${t}-mh`,MK:`${t}-mk`,ML:`${t}-ml`,MM:`${t}-mm`,MN:`${t}-mn`,MO:`${t}-mo`,MP:`${t}-mp`,MQ:`${t}-mq`,MR:`${t}-mr`,MS:`${t}-ms`,MT:`${t}-mt`,MU:`${t}-mu`,MV:`${t}-mv`,MW:`${t}-mw`,MX:`${t}-mx`,MY:`${t}-my`,MZ:`${t}-mz`,NA:`${t}-na`,NC:`${t}-nc`,NE:`${t}-ne`,NF:`${t}-nf`,NG:`${t}-ng`,NI:`${t}-ni`,NL:`${t}-nl`,NO:`${t}-no`,NP:`${t}-np`,NR:`${t}-nr`,NU:`${t}-nu`,NZ:`${t}-nz`,OM:`${t}-om`,PA:`${t}-pa`,PE:`${t}-pe`,PF:`${t}-pf`,PG:`${t}-pg`,PH:`${t}-ph`,PK:`${t}-pk`,PL:`${t}-pl`,PM:`${t}-pm`,PN:`${t}-pn`,PR:`${t}-pr`,PS:`${t}-ps`,PT:`${t}-pt`,PW:`${t}-pw`,PY:`${t}-py`,QA:`${t}-qa`,RE:`${t}-re`,RO:`${t}-ro`,RS:`${t}-rs`,RU:`${t}-ru`,RW:`${t}-rw`,SA:`${t}-sa`,SB:`${t}-sb`,SC:`${t}-sc`,SD:`${t}-sd`,SE:`${t}-se`,SG:`${t}-sg`,SH:`${t}-sh`,SI:`${t}-si`,SJ:`${t}-sj`,SK:`${t}-sk`,SL:`${t}-sl`,SM:`${t}-sm`,SN:`${t}-sn`,SO:`${t}-so`,SR:`${t}-sr`,SS:`${t}-ss`,ST:`${t}-st`,SV:`${t}-sv`,SX:`${t}-sx`,SY:`${t}-sy`,SZ:`${t}-sz`,TC:`${t}-tc`,TD:`${t}-td`,TG:`${t}-tg`,TH:`${t}-th`,TJ:`${t}-tj`,TK:`${t}-tk`,TL:`${t}-tl`,TM:`${t}-tm`,TN:`${t}-tn`,TO:`${t}-to`,TR:`${t}-tr`,TT:`${t}-tt`,TV:`${t}-tv`,TW:`${t}-tw`,TZ:`${t}-tz`,UA:`${t}-ua`,UG:`${t}-ug`,US:`${t}-us`,UY:`${t}-uy`,UZ:`${t}-uz`,VA:`${t}-va`,VC:`${t}-vc`,VE:`${t}-ve`,VG:`${t}-vg`,VI:`${t}-vi`,VN:`${t}-vn`,VU:`${t}-vu`,WF:`${t}-wf`,WS:`${t}-ws`,YE:`${t}-ye`,YT:`${t}-yt`,ZA:`${t}-za`,ZM:`${t}-zm`,ZW:`${t}-zw`});let b=d;function C(a){return h.isWindow(a)?a:h.getElement(a)}function I(a){var e;return!!((e=h.getElement(a))!=null&&e.closest("html"))}class N{constructor(e,i=["click"],s,n,r){l(this,"element");l(this,"elementControl");l(this,"elementControlEdit");l(this,"type");l(this,"listenerRecent",e=>{var i,s;I(this.elementControl)?((i=this.listener)==null||i.call(this.element,e,this.detail),p.isObject(this.options)&&((s=this.options)!=null&&s.once)&&this.stop()):this.stop()});l(this,"activity",!1);l(this,"activityItems",[]);this.listener=s,this.options=n,this.detail=r,this.element=C(e),this.elementControl=h.getElement(e),this.type=v.toArray(i)}isActive(){return this.activity}setElement(e){const i=C(e);return this.elementControlEdit||(this.elementControl=h.getElement(e)),this.element=i,this.reset(),this}setElementControl(e){return this.elementControl=h.getElement(e),this.elementControlEdit=!D.isNull(this.elementControl),this.elementControlEdit||(this.elementControl=h.getElement(this.element)),this}setType(e){return this.type=v.toArray(e),this.reset(),this}setListener(e){return this.listener=e,this}setOptions(e){return this.options=e,this.reset(),this}setDetail(e){return this.detail=e,this}dispatch(e=this.detail){return this.type.forEach(i=>{var s;return(s=this.element)==null?void 0:s.dispatchEvent(new CustomEvent(i,{detail:e}))}),this}start(){return this.activity||(this.activity=!0,this.activityItems=[],this.type.forEach(e=>{this.element&&!(e==="resize"&&this.makeResize())&&!(e==="scroll-sync"&&this.makeScroll())&&(this.element.addEventListener(e,this.listenerRecent,this.options),this.activityItems.push({element:this.element,type:e}))})),this}stop(){return this.activity&&(this.activity=!1,this.activityItems.forEach(({element:e,type:i,listener:s,observer:n})=>{n?n.disconnect():s?e==null||e.removeEventListener(i,s):e==null||e.removeEventListener(i,this.listenerRecent)})),this}toggle(e){return e?this.start():this.stop()}reset(){return this.activity&&(this.stop(),this.start()),this}isObserver(){return"ResizeObserver"in window}makeResize(){if(this.element&&this.element instanceof HTMLElement&&this.element!==document.body&&this.isObserver()){const e=new ResizeObserver(i=>this.listenerRecent(i==null?void 0:i[0]));return e.observe(this.element),this.activityItems.push({element:this.element,type:"resize",observer:e}),!0}return!1}makeScroll(){if(this.element){let e=!1;const i=s=>{e||(e=!0,requestAnimationFrame(()=>{this.listenerRecent(s),e=!1}))};return this.element.addEventListener("scroll",i,this.options),this.element.addEventListener("resize",i,this.options),this.activityItems.push({element:this.element,type:"scroll",listener:i},{element:this.element,type:"resize",listener:i}),!0}return!1}}exports.CacheItem=w;exports.EventItem=N;exports.GEO_FLAG_ICON_NAME=t;exports.GeoFlag=b;exports.GeoIntl=M;exports.getElementOrWindow=C;exports.isInDom=I;exports.toDate=m;
