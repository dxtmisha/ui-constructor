"use strict";var u=Object.defineProperty;var l=(h,t,s)=>t in h?u(h,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[t]=s;var a=(h,t,s)=>(l(h,typeof t!="symbol"?t+"":t,s),s);const i=require("./Api-DvXcc5GL.cjs"),d=require("./toArray-C_3YLL9r.cjs");class c{static async get(t){var e;const s=this.getName(t);return s in this.data?this.data[s]:(i.Api.isLocalhost()||await this.add(t),((e=this.data)==null?void 0:e[s])??t)}static getSync(t){const s=this.getName(t);return s in this.data?this.data[s]:t}static async getList(t){return new Promise(s=>{const e={};let r=0;for(const o of t)this.get(o).then(n=>{e[o]=n,++r>=t.length&&s(e)})})}static add(t){return new Promise(s=>{this.cache.push(...d.toArray(t)),this.resolveList.push(s),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.timeout=void 0,this.make().then(()=>{this.resolveList.forEach(e=>e()),this.resolveList=[]})},160)})}static addSync(t){i.forEach(t,(s,e)=>{i.isString(s)&&i.isFilled(s)&&(this.data[e]=s)})}static async addNormalOrSync(t){if(i.isFilled(t))if(i.Api.isLocalhost())this.addSync(t);else{const s=Object.keys(t);s.length>0&&await this.add(s)}}static getName(t){return`${i.Geo.getLocation()}-${t}`}static async getResponse(){const t=i.Api.isLocalhost()?this.urlLocalhost:this.url,s=await i.Api.response({path:t,request:{list:this.cache}});return(s==null?void 0:s.data)??{}}static async make(){const t=await this.getResponse();this.cache.forEach(s=>{this.data[this.getName(s)]=(t==null?void 0:t[s])??""}),this.cache=[]}}a(c,"url",i.useEnv("apiTranslate")),a(c,"urlLocalhost","translate.json"),a(c,"data",{}),a(c,"cache",[]),a(c,"resolveList",[]),a(c,"timeout");exports.Translate=c;
