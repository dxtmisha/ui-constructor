"use strict";var h=Object.defineProperty;var l=(i,t,e)=>t in i?h(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var a=(i,t,e)=>(l(i,typeof t!="symbol"?t+"":t,e),e);function r(i){return Array.isArray(i)}class c{constructor(t,e=Object.keys(t)){a(this,"cache",{});this.props=t,this.watch=e}is(t){return r(t)?!!t.find(e=>this.isDifferent(e)):this.isDifferent(t)}isChanged(){const t=this.props;return!!this.watch.find(e=>e in t&&this.isDifferent(e))}update(){const t=this.props;this.watch.forEach(e=>{e in t&&this.isDifferent(e)&&(this.cache[e]=t[e])})}isDifferent(t){var e,s;return((e=this.cache)==null?void 0:e[t])!==((s=this.props)==null?void 0:s[t])}}class n{constructor(t,e,s){a(this,"event",{});a(this,"changed");this.props=t,this.callback=e,this.changed=new c(t,s)}make(t){return this.makeCallback(t),this}is(t){return t in this.props}isChanged(t,e){return!(t in this.event)||this.changed.is(e||t)}makeCallback(t=!1){(t||this.changed.isChanged())&&(this.initEvent(),this.makeCallbackItem(),this.changed.update())}makeCallbackItem(){this.callback&&this.callback(this.event)}}class g extends n{make(t){return this.makeCallback(t).then(),this}async makeCallback(t){(t||this.changed.isChanged())&&(await this.initEvent(),this.makeCallbackItem(),this.changed.update())}}function f(i){if(typeof i=="number")return i;let t=i.replace(/[^\d., ]+/ig,"");return t.match(/( [0-9]{3}[ ,.]|[0-9] [0-9])/ig)?t=t.replace(/ /ig,"").replace(/,/ig,"."):t.match(/,[0-9]{3}[,.]/ig)?t=t.replace(/,/ig,""):t.match(/[.][0-9]{3}[,.]/ig)?t=t.replace(/[.]/ig,"").replace(/,/ig,"."):t=t.replace(/,/ig,"."),parseFloat(t)}exports.DesignAbstract=n;exports.DesignAsyncAbstract=g;exports.DesignChanged=c;exports.isArray=r;exports.toNumber=f;
