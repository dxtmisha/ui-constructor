import{h,c,s as m,a as b}from"./vue.esm-bundler-DKn_-kmd.js";import{Z as g}from"./DesignConstructorAbstract-pm1V7i1G-DKYGky5W.js";import{i as r}from"./toNumber-eA5ODeva-B35HWKKW.js";import{o as y}from"./DesignAsyncAbstract-Bi5cMulT-_fSgJIaJ.js";var f=Object.defineProperty,S=(n,e,i)=>e in n?f(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,l=(n,e,i)=>(S(n,typeof e!="symbol"?e+"":e,i),i);class V extends y{constructor(e,i){super(e,i,["value","visible"]),l(this,"timeout"),l(this,"timeoutReject")}isValue(){return this.getValue()>0}getTag(){var e;return(e=this.props)!=null&&e.circular?"svg":"div"}getValue(){var e;return r(((e=this.props)==null?void 0:e.value)??0)}getValueInPercent(){var e;if(this.isValue()){const i=this.getValue(),t=100/this.getMax()*i;return(e=this.props)!=null&&e.circular?t.toString():`${100-t}%`}return null}getMax(){var e;return r(((e=this.props)==null?void 0:e.max)??100)}getStyles(){return{"--??-sys-value":this.getValueInPercent()}}onAnimation({animationName:e}){e.match("-hidden")&&(this.event.hide=!1,this.event.classes=this.initClasses(),this.makeCallbackItem())}async initEvent(){this.isChanged("visible")&&([this.event.hide,this.event.visible]=await this.makeVisible()),this.isChanged("classes",["value","visible"])&&(this.event.classes=this.initClasses())}makeVisible(){return new Promise((e,i)=>{var t,a,v,d;const u=(t=this.props)==null?void 0:t.visible,o=r(((a=this.props)==null?void 0:a.delay)??0),p=r(((v=this.props)==null?void 0:v.delayHide)??0);clearTimeout(this.timeout),this.isValue()?e([!1,!1]):!!((d=this.event)!=null&&d.visible)!==u&&(u&&o?(this.timeout=setTimeout(()=>{clearTimeout(this.timeoutReject),e(this.initVisible())},o),this.timeoutReject=setTimeout(i,o+1e3)):!u&&p?this.timeout=setTimeout(()=>{e(this.initVisible())},p):e(this.initVisible()))})}initVisible(){var e;const i=(e=this.props)==null?void 0:e.visible;return[!i,!!i]}initClasses(){return{"??--hide":this.event.hide,"??--visible":this.event.visible,"??--value":this.isValue()}}}class x{constructor(e){l(this,"item"),l(this,"tag",c(()=>this.item.getTag())),l(this,"valueInPercent",c(()=>this.item.getValueInPercent())),l(this,"hide",m(!1)),l(this,"visible",m(!1)),l(this,"classes",m({})),l(this,"styles",c(()=>this.item.getStyles())),this.props=e,this.item=new V(e,i=>{this.hide.value=i.hide,this.visible.value=i.visible,this.classes.value=i.classes}),b(()=>this.item.make())}onAnimation(e){this.item.onAnimation(e)}}class k extends g{constructor(e,i,t){super(e,i,t),l(this,"item"),this.item=new x(i),this.init()}makeOptions(){return this}initSetup(){return{tag:this.item.tag,valueInPercent:this.item.valueInPercent,hide:this.item.hide,visible:this.item.visible,onAnimation:e=>this.item.onAnimation(e)}}initExpose(){return{}}initClasses(){return{main:{...this.toClassName(this.item.classes.value)},circle:this.getSubClass("circle"),circleSub:this.getSubClass("circleSub")}}initStyles(){return{...this.toClassName(this.item.styles.value)}}initRender(){var e,i;const t=this.setup(),a=[];return(e=this.props)!=null&&e.circular&&(((i=this.props)==null?void 0:i.indeterminate)==="type3"&&a.push(h("circle",{class:t.classes.value.circleSub,cx:"24",cy:"24",r:"20"})),a.push(h("circle",{class:t.classes.value.circle,cx:"24",cy:"24",r:"20"}))),h(t.tag.value,{ref:this.element,class:t.classes.value.main,style:t.styles.value,viewBox:"0 0 48 48",onAnimationend:t.onAnimation},a)}}const s={max:100,delay:360,linear:!0,indeterminate:"type1",position:"top"},A={value:[Number,String],max:{type:[Number,String],default:s==null?void 0:s.max},visible:Boolean,delay:{type:[Number,String],default:s==null?void 0:s.delay},delayHide:[Number,String],linear:{type:Boolean,default:s==null?void 0:s.linear},circular:Boolean,indeterminate:{type:String,default:s==null?void 0:s.indeterminate},position:{type:String,default:s==null?void 0:s.position},dense:Boolean,inverse:Boolean};export{k as T,A as k,s as t};
